var f=class{constructor(){this.NewForegroundColor="";this.NewBackgroundColor="";this.NewIsBold=!1;this.CurrentForegroundColor="";this.CurrentBackgroundColor="";this.CurrentIsBold=!1;this.InStyle=!1;this.PALETTE_VGA={};this.PALETTE_256={};this.NewForegroundColor="",this.NewBackgroundColor="",this.NewIsBold=!1,this.CurrentForegroundColor="",this.CurrentBackgroundColor="",this.CurrentIsBold=!1,this.InStyle=!1,this.PALETTE_VGA={30:"rgb(0, 0, 0)",31:"rgb(170, 0, 0)",32:"rgb(0, 170, 0)",33:"rgb(170, 85, 0)",34:"rgb(0, 0, 170)",35:"rgb(170, 0, 170)",36:"rgb(0, 170, 170)",37:"rgb(170, 170, 170)",90:"rgb(85, 85, 85)",91:"rgb(255, 85, 85)",92:"rgb(85, 255, 85)",93:"rgb(255, 255, 85)",94:"rgb(85, 85, 255)",95:"rgb(255, 85, 255)",96:"rgb(85, 255, 255)",97:"rgb(255, 255, 255)"},this.PALETTE_256=["#000000","#800000","#008000","#808000","#000080","#800080","#008080","#c0c0c0","#808080","#ff0000","#00ff00","#ffff00","#0000ff","#ff00ff","#00ffff","#ffffff",...Array.from({length:216},(r,t)=>{let e=Math.floor(t/36)*51,s=Math.floor(t%36/6)*51,i=t%6*51;return`rgb(${e},${s},${i})`}),...Array.from({length:24},(r,t)=>{let e=8+t*10;return`rgb(${e},${e},${e})`})]}ParseColorCode(r,t){let e=r.substring(t),s;if(s=e.match(/^\[(3|4|7)z/)){let[o]=s;return[t+o.length,0,!1,!0]}if(s=e.match(/^\[(38|48);5;(\d+)m/)){let[o,g,l]=s;var i=parseInt(l);return i>8&&(i=i-8+10),[t+o.length,i+30,!1,!0]}if(s=e.match(/^\[(?:38|48);2;(\d+);(\d+);(\d+)m/)){let[o,g,l,u]=s;return[t+o.length,`rgb(${g},${l},${u})`,!1,!1]}if(s=e.match(/^\[([01];)?(\d+)m/)){let[o,g,l]=s,u=g=="1;",n=parseInt(l),h=n==0||n>=30&&n<=37||n>=40&&n<=47||n>=90&&n<=97||n>=100&&n<=107;return[t+o.length,n,u,h]}return[t,-1,!1,!1]}SetColor(r,t,e){this.NewIsBold=t,typeof r=="string"?this.NewForegroundColor=r:typeof r=="number"&&(!e&&r>=0&&r<=255?this.NewForegroundColor=this.PALETTE_256[r]:r>=30&&r<=37?(t&&(r+=60),this.NewForegroundColor=this.PALETTE_VGA[r]):e&&r>=40&&r<=47?this.NewForegroundColor=this.PALETTE_VGA[r+50]:!e&&r>=40&&r<=47?this.NewBackgroundColor=this.PALETTE_VGA[r-10]:r>=90&&r<=97?this.NewForegroundColor=this.PALETTE_VGA[r]:r>=100&&r<=107?this.NewBackgroundColor=this.PALETTE_VGA[r-10]:r===0&&(this.NewForegroundColor="",this.NewBackgroundColor="",this.NewIsBold=!1))}AppendText(r,t){if(t==="")return r;let e="";return(this.NewBackgroundColor!==this.CurrentBackgroundColor||this.NewForegroundColor!==this.CurrentForegroundColor||this.NewIsBold!==this.CurrentIsBold)&&(this.InStyle&&(e="</span>"),this.NewBackgroundColor!==""||this.NewForegroundColor!==""||this.NewIsBold?(e+="<span style='",this.NewBackgroundColor!==""&&(e+=`background-color: ${this.NewBackgroundColor};`),this.NewForegroundColor!==""&&(e+=`color: ${this.NewForegroundColor};`),this.NewIsBold&&(e+="font-weight: bold;"),e+="'>",this.InStyle=!0):this.InStyle=!1,this.CurrentBackgroundColor=this.NewBackgroundColor,this.CurrentForegroundColor=this.NewForegroundColor,this.CurrentIsBold=this.NewIsBold),r+e+t}ColorText(r){let t="",e=0,s=0;for(;e>-1&&e<r.length;){if(e=r.indexOf("\x1B",e),e>-1){t=this.AppendText(t,r.substring(s,e));let[i,o,g,l]=this.ParseColorCode(r,e+1);this.SetColor(o,g,l),e=Number(i)}else s<r.length&&(t=this.AppendText(t,r.substring(s)));s=e}return this.InStyle&&(t+="</span>"),t}};export{f as ANSITextColorizer};
//# sourceMappingURL=color.js.map
